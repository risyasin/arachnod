<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Arachnod by risyasin</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Arachnod</h1>
        <h2>High performance crawler for Nodejs</h2>
        <a href="https://github.com/risyasin/arachnod" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>Powerful &amp; Easy to use web crawler for Nodejs.  <a href="http://arachnod.evrima.net">Arachnod</a> has been designed for heavy and long running tasks, 
for performance &amp; efective resource usage. For it's goals Arachnod uses <a href="http://www.redis.io">Redis</a>'s power as a backend. 
Covering all heavy &amp; time consuming tasks such as controlling urls &amp; their tasks to store &amp; distribute information among the Arachnod's child tasks 
(Spiderlings). Arachnod also avoids to use any server-side DOM requiring technics 
such as <a href="http://www.jquery.com">jQuery</a> with <a href="https://github.com/tmpvar/jsdom">JSdom</a> to use resources properly. 
Frankly, I have tested JSdom for along time with no luck, always memory leaks &amp; high memory usage. 
Libxml based XPath solutions were not actually real, Instead, Arachnod uses <a href="http://cheeriojs.github.io/cheerio/">Cheerio</a> for accessing DOM elements. 
Also uses <a href="https://github.com/visionmedia/superagent">SuperAgent</a> as HTTP Client. </p>

<h3>
<a id="how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to install</h3>

<p><code>$ npm install arachnod</code></p>

<p>Or via Git
<code>$ git clone git@github.com:risyasin/arachnod.git</code></p>

<p>Then, install required Nodejs modules with npm 
<code>$ npm install</code></p>

<p><strong>Please</strong> make sure you have a running <a href="https://redis.io">redis-server</a> </p>

<h3>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> bot <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>arachnod<span class="pl-pds">'</span></span>);

<span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>hit<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">doc</span>, <span class="pl-smi">$</span>) {

    <span class="pl-c">// Do whatever you want to do parsed html content.</span>

    <span class="pl-k">var</span> desc <span class="pl-k">=</span> $(<span class="pl-s"><span class="pl-pds">'</span>article.entry-content<span class="pl-pds">'</span></span>).<span class="pl-c1">text</span>();

    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">doc</span>.<span class="pl-smi">path</span>, desc);

    <span class="pl-c">// if you don't need to follow all links.</span>
    <span class="pl-smi">bot</span>.<span class="pl-en">pause</span>();


});


<span class="pl-smi">bot</span>.<span class="pl-en">crawl</span>({
    <span class="pl-s"><span class="pl-pds">'</span>redis<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>127.0.0.1<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>parallel<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-c1">4</span>,
    <span class="pl-s"><span class="pl-pds">'</span>start<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>https://github.com/risyasin/arachnod<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>resume<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-c1">false</span>
});


<span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">err</span>, <span class="pl-smi">task</span>) {
    <span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>Bot error:<span class="pl-pds">'</span></span>, err, <span class="pl-smi">err</span>.<span class="pl-smi">stack</span>, task);
});


<span class="pl-smi">bot</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>end<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> (<span class="pl-smi">err</span>, <span class="pl-smi">status</span>) {
    <span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>Bot finished:<span class="pl-pds">'</span></span>, err, status);
});</pre></div>

<h3>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h3>

<h5>
<a id="parameters" class="anchor" href="#parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h5>

<table>
<thead>
<tr>
<th>Parameter Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>start</strong></td>
<td>Start url for crawling (Mandatory)</td>
</tr>
<tr>
<td><strong>parallel</strong></td>
<td>Number of child processes that will handle network tasks (Default: 8) Do not this more than 20.</td>
</tr>
<tr>
<td><strong>redis</strong></td>
<td>Host name or IP address that Redis runs on (Default: 127.0.0.1)</td>
</tr>
<tr>
<td><strong>redisPort</strong></td>
<td>Port number for Redis (Default: 6379)</td>
</tr>
<tr>
<td><strong>verbose</strong></td>
<td>Arachnod will tell you more, <strong>1</strong> (silence) - <strong>10</strong> (everything). Default: 1.</td>
</tr>
<tr>
<td><strong>resume</strong></td>
<td>Resume support, Simply, does not resets queues if there is any. (Default: false)</td>
</tr>
<tr>
<td><strong>ignorePaths</strong></td>
<td>Ignores paths starts with. Must be multiple in array syntax such as <code>['/blog','/gallery']</code>
</td>
</tr>
<tr>
<td><strong>ignoreParams</strong></td>
<td>Ignores query string parameters, Must be in array syntax. such as <code>['color','type']</code>
</td>
</tr>
<tr>
<td><strong>sameDomain</strong></td>
<td>Stays in the same hostname. (will be implemented at v1)</td>
</tr>
<tr>
<td><strong>useCookies</strong></td>
<td>Using cookies (will be implemented at v0.4)</td>
</tr>
<tr>
<td><strong>obeyRobotsTxt</strong></td>
<td>As it's name says. Honors the robots.txt (will be implemented at v0.5)</td>
</tr>
</tbody>
</table>

<h5>
<a id="events" class="anchor" href="#events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events</h5>

<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>hit</strong></td>
<td>Emits when a url has been downloaded &amp; processed, sends two parameters in order <em>doc</em> Parsed url info, <strong>$</strong> as Cheerio object.</td>
</tr>
<tr>
<td><strong>error</strong></td>
<td>Emits when an error occurs at any level including child processes. Single parameter Error or Exception.</td>
</tr>
<tr>
<td><strong>end</strong></td>
<td>Emits when reached at the end of tasks queue. Return statistics.</td>
</tr>
<tr>
<td><strong>stats</strong></td>
<td>Emits bot stats whenever a child changes it's states (such as downloading or querying queues). Use wisely.</td>
</tr>
</tbody>
</table>

<h5>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h5>

<table>
<thead>
<tr>
<th>Method Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>crawl(Parameters)</strong></td>
<td>Starts a new crawling session with parameters</td>
</tr>
<tr>
<td><strong>pause()</strong></td>
<td>Stops bot but does not delete any task queue.</td>
</tr>
<tr>
<td><strong>resume()</strong></td>
<td>Starts back a paused session. Useful to control resource usage in low spec systems (single core etc.).</td>
</tr>
<tr>
<td><strong>queue(url)</strong></td>
<td>Adds given url to task queue.</td>
</tr>
<tr>
<td><strong>getStats()</strong></td>
<td>Returns various statistics such as downloaded, checked, finished url counts, memory size etc.</td>
</tr>
</tbody>
</table>

<h5>
<a id="whats-next" class="anchor" href="#whats-next" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's Next</h5>

<ul>
<li>Regex support for ignore parameters</li>
<li>Cookie support</li>
<li>Robots.txt &amp; rel=nofollow support</li>
<li>Actions for content-type or any given response headers </li>
<li>Custom headers</li>
<li>Custom POST/PUT method queues</li>
<li>Free-Ride mode (will be fun)</li>
<li>Stats for each download/hit event</li>
<li>Plugin support</li>
</ul>

<h4>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h4>

<p>If you love to use Arachnod. Help me to improve it. 
Feel free to make pull request for anything useful. </p>

<h4>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h4>

<p>GNU - Version 2</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/risyasin/arachnod/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/risyasin/arachnod/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/risyasin/arachnod"></a> is maintained by <a href="https://github.com/risyasin">risyasin</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-25703095-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
